<div class="overview-container">
  <h1>Good morning, {{userName()}}</h1>

  <!-- Top Summary -->
  <div class="summary-cards">
    <div class="card">
      <span class="number green">{{openBoards()}}</span>
      <span>Open Boards</span>
    </div>
    <div class="card">
      <span class="number purple">{{todayMeetings()}}</span>
      <span>Meetings Today</span>
    </div>
    <div class="card">
      <span class="number red">{{adminChanges()}}</span>
      <span>Admin changes</span>
    </div>
  </div>

  <!-- Main Grid -->
  <div class="main-grid">
    <!-- Boards -->
    <div class="panel">
      <div class="panel-header">
        <h2>Your Boards</h2>
      </div>
      <ul>
          @for (item of boards(); track item) {
            <li>
              <span>{{ item.name }}</span>
              <small>{{ item.status }}</small>
            </li>
          } @empty {
          <span>There are no items.</span>
          }
      </ul>
    </div>

    <!-- Meetings -->
    <div class="panel">
      <div class="panel-header">
        <h2>Next Meetings</h2>
        @if (loadingMeetings()) {
          <small>Loadingâ€¦</small>
        }
      </div>

      @if (!loadingMeetings() && meetings().length === 0) {
        <ul><li>No upcoming meetings found.</li></ul>
      } @else {
        <ul>
          @for (ev of meetings(); track ev.id) {
            <li class="meeting-item">
              <div class="meeting-title">{{ ev.subject || 'No Subject' }}</div>
              <div class="meeting-time">{{ formatTime(ev.start.dateTime) }}</div>
            </li>
          }
        </ul>
      }
    </div>

    <!-- Chart -->
    <div class="panel">
      <h2>Recent Activity</h2>
      @defer {
        <app-chart></app-chart>
      }
    </div>


    <!-- Notifications -->
    <div class="panel">
      <h2>Notifications</h2>
      <ul>
        @for (n of notifications(); track n.id) {
          <li>
            <span>{{ stripHtml(n.lastMessagePreview?.body?.content ?? '') || 'New Message' }}</span>
            <small>{{ n.lastMessagePreview?.from?.user?.displayName || 'Unknown' }}</small>
          </li>
        } @empty {
          <li><span>No new messages</span></li>
        }
      </ul>
    </div>
  </div>
</div>