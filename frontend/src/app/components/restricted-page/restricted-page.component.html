
<div class="overview-container">
  <h1>Guten Morgen, {{userName}}</h1>

  <!-- Top Summary -->
  <div class="summary-cards">
    <div class="card">
      <span class="number green">{{openBoards}}</span>
      <span>Offene Boards</span>
    </div>
    <div class="card">
      <span class="number purple">{{todayMeetings}}</span>
      <span>Meetings Heute</span>
    </div>
    <div class="card">
      <span class="number red">{{adminChanges}}</span>
      <span>Admin changes</span>
    </div>
  </div>

  <!-- Main Grid -->
  <div class="main-grid">
    <!-- Boards -->
    <div class="panel">
      <div class="panel-header">
        <h2>Deine Boards</h2>
        <button class="new-board" (click)="addBoard()">New Board</button>
      </div>
      <ul>
          @for (item of boards; track item) {
            <li>
              <span>{{ item.name }}</span>
              <small>{{ item.status }}</small>
            </li>
          } @empty {
          <span>There are no items.</span>
          }
      </ul>
    </div>

    <!-- Meetings -->
    <div class="panel">
      <div class="panel-header">
        <h2>Nächste Meetings</h2>
        @if (loadingMeetings) {
          <small>Laden…</small>
        }
      </div>

      @if (!loadingMeetings && meetings.length === 0) {
        <ul><li>Keine kommenden Meetings gefunden.</li></ul>
      } @else {
        <ul>
          @for (ev of meetings; track ev.id) {
            <li class="meeting-item">
              <div class="meeting-title">{{ ev.subject || 'Ohne Titel' }}</div>
              <div class="meeting-time">{{ formatTime(ev.start.dateTime) }}</div>
            </li>
          }
        </ul>
      }
    </div>

    <!-- Kontakte -->
    <div class="panel">
      <h2>Kürzliche Kontakte</h2>

      @for (c of contacts; track c.id) {
        <div class="contact">
          <div class="avatar">
            @if (c.photoUrl) {
              <img [src]="c.photoUrl" alt="{{ c.name }}">
            } @else {
              <mat-icon>person</mat-icon>
            }
          </div>
          <div>
            <span>{{ c.name }}</span>
          </div>
        </div>
      }
    </div>


    <!-- Notifications -->
    <div class="panel">
      <h2>Benachrichtigungen</h2>
      <ul>
        @for (n of notifications; track n.id) {
          <li>
            <span>{{ stripHtml(n.lastMessagePreview?.body?.content ?? '') || 'Neue Nachricht' }}</span>
            <small>{{ n.lastMessagePreview?.from?.user?.displayName || 'Unbekannt' }}</small>
          </li>
        } @empty {
          <li><span>Keine neuen Nachrichten</span></li>
        }
      </ul>
    </div>
  </div>
</div>
