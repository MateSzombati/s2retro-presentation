<div #dropdownContainer>
  <div class="custom-select-box" [ngClass]="{ 'active': dropdownOpen || selectedType }" (click)="toggleDropdown()">
    <span class="select-label">
      {{ selectedTypeName || 'Select type' }}
    </span>
    <svg class="dropdown-icon" [class.clicked]="dropdownOpen" style="scale: 1.5;" width="10" height="7" viewBox="0 0 26 25" fill="none" xmlns="http://www.w3.org/2000/svg">
      <g filter="url(#filter0_d_109_19)">
        <path d="M20.5 8.25L13 15.75L5.5 8.25" stroke="#B1B1B1" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
      </g>
      <defs>
        <filter id="filter0_d_109_19" x="-3" y="0" width="32" height="32" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB">
          <feFlood flood-opacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="4"/>
          <feGaussianBlur stdDeviation="2"/>
          <feComposite in2="hardAlpha" operator="out"/>
          <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_109_19"/>
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_109_19" result="shape"/>
        </filter>
      </defs>
    </svg>
  </div>
</div>

<ng-template #dropdownTemplate>
  <div class="custom-options">
      @for (type of standardTypes; track type) {
        <div
          class="custom-option"
          (click)="selectType(type, null)"
        >
          {{ type }}
        </div>
      }
    <div style="border-bottom: 1px solid #333333; height: 1px;"></div>
      @for (type of types; track type.id) {
        <div 
          class="custom-option"
          (click)="selectType(type.name!, type)"
        >
          {{type.name}}
        </div>
      }
    <div class="custom-option" style="border-top: 1px solid #494949" (click)="openDialog()">Manage types</div>
  </div>
</ng-template>