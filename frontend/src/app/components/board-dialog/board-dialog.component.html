<h2 mat-dialog-title>Retro Board erstellen</h2>

<mat-dialog-content class="dialog-content">

  <!-- Board Name -->
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Board Name</mat-label>
    <input matInput [(ngModel)]="boardName" placeholder="Board Name eingeben" />
  </mat-form-field>

  <!-- Typ (Status/Layout) -->
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Typ</mat-label>
    <mat-select [(ngModel)]="layout">
      <mat-option value="Abgeschlossen">Abgeschlossen</mat-option>
      <mat-option value="Meetingphase">Meetingphase</mat-option>
      <mat-option value="Eintragshase">Eintragshase</mat-option>
    </mat-select>
  </mat-form-field>

  <!-- Zeitraum -->
  <div class="date-range">
    <mat-form-field appearance="outline">
      <mat-label>Start</mat-label>
      <input matInput [matDatepicker]="startPicker" [(ngModel)]="startDate">
      <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
      <mat-datepicker #startPicker></mat-datepicker>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Ende</mat-label>
      <input matInput [matDatepicker]="endPicker" [(ngModel)]="endDate">
      <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
      <mat-datepicker #endPicker></mat-datepicker>
    </mat-form-field>
  </div>

<!-- Benutzer hinzufügen -->
<div class="add-user-row">
  <mat-form-field appearance="outline" class="full-width">
    <mat-label>Benutzer hinzufügen</mat-label>
    <input matInput placeholder="Benutzer per Name oder E-Mail suchen"
           [(ngModel)]="searchInput">
  </mat-form-field>
  <button mat-raised-button color="primary" class="add-btn" (click)="addParticipant()">
    <mat-icon>person_add</mat-icon>
    Hinzufügen
  </button>
</div>

<!-- Teilnehmer -->
<h3>Teilnehmer</h3>
<mat-list>
  @for (p of participants; track p) {
    <mat-list-item class="participant-item">
      <div class="participant-info">
        @if (p.photo) {
          <img [src]="p.photo" class="avatar">
        } @else {
          <mat-icon class="avatar placeholder">person</mat-icon>
        }

        <div class="text-info">
          <div class="name">{{ p.name }}</div>
          <div class="email">{{ p.email }}</div>
        </div>
      </div>

      <mat-select [(ngModel)]="p.role" class="role-select">
        <mat-option value="Benutzer">Benutzer</mat-option>
        <mat-option value="Admin">Admin</mat-option>
      </mat-select>
    </mat-list-item>
  }
</mat-list>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-stroked-button (click)="onCancel()">Abbrechen</button>
  <button mat-raised-button color="primary" (click)="onSave()">+ Board erstellen</button>
</mat-dialog-actions>
